AC_INIT(raceintospace.spec)

dnl Specify directory for local macros
AC_CONFIG_MACRO_DIR([m4])

dnl Get the operating system and version number...
uname=`uname`

AC_PROG_CC

AC_CHECK_LIB(vorbisfile,main)
AC_CHECK_LIB(asound,main)
AC_CHECK_LIB(m,main)
AC_CHECK_LIB(SDL,main)

AX_CREATE_STDINT_H(int_types.h)

dnl cross-compile specific configuration
case "$target" in
i?86-mingw32msvc)
	dnl Windows/CygWin configuration
	LIBS="$LIBS `sdl-config --libs`"
	PROG_NAME=raceintospace.exe
	;;
*)
	dnl Everyone else
	PROG_NAME=raceintospace
	LIBS="$LIBS `sdl-config --libs`"
	;;
esac

case "$uname" in
Darwin)
	dnl Darwin/Mac OS X configuration
	AC_DEFINE([[MACOSX]])
	;;
Linux)
	dnl Linux OS
	;;
CYGWIN*)
	dnl Cygwin
	dnl CYGWIN already defines __CYGWIN__
	;;
*)
	dnl unknown system
	;;
esac


AC_SUBST(PROG_NAME)

AC_CONFIG_HEADER(race.h)
AC_OUTPUT(Makefile, chmod a-w Makefile race.h)
